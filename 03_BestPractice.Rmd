
# Best Practice

```{=html}
<script src="https://kit.fontawesome.com/0e67562c4f.js" crossorigin="anonymous"></script>
<!-- <link rel="stylesheet" href="./img/fontawesome.min.css"> -->
```


**What is Best Practice?**

> " ~~All~~ Many roads lead to Rome"

: You can achieve most things in many different ways
- _Best Practice_ refers to the best/ easiest/ clearest way of working with R

### Overview

- Naming Variables
- Creating data meaningfully
- Working Directories
- R Projects
- Make R your own: ![Appearance](./img/appearance.png){#id .class .no-border width=auto height=40px}


## Naming Conventions {#varnames}

R is a so-called *object-oriented* language.
What that means for us is mostly that all our data exist as "objects" as far is R is concerned.
Just like in real life, we can *do* stuff with those objects now, which is called using a *function* or *command*.
Which brings me to the importance of proper names for all your variables, data sets, functions...
Everything.

If we go to the market and I tell you to get me an apple, you will probably be confused if there are many types of apples, maybe different colors, maybe different breeds.
Basically, if I don't specify which apple I want, you are not able to pick out the right one.
The same is true for R: If you try to call a function but fail to specify what object to use the function on, R is confused and throws you an error.

Now, this may seem pretty obvious but it is a pretty common source of errors, especially during the "steep phase" of the learning curve.
In R, `abc` is a different object than `ABC`, which is different from `a_b_c`, which is different from `A.B.C`. All of these variants are possible ways of naming your objects in R.
However, it makes everyone's life significantly easier to stick to some naming-guidelines.

- Preferably use **lower-case** variable names, e.g. `gender` instead of `Gender` or `GENDER`.
- Preferably use an **underscore** to differentiate between different words in your object names if necessary, e.g. `music_preference`.
- **Avoid using numbers** in your names because likely either you or R will get confused with this at some point, e.g. `raw_data` instead of `data1`[^1].
- Use **abbreviations** where useful, e.g. `rt` instead of `reaction_times`.
- Use **names that will still make sense** to you in the future, i.e. avoid names like `asdf_data` or `blibblobfundata`. The best case scenario would be that your variable names also makes sense to other people if they try to understand your code!

[^1]: Additionally, the 1 (one) and the l (lower-case L) can look very similar, which makes thing just even worse when trying to figure out an error.

I will admit that some of these pieces of advice are more opinionated personal experience than objective facts.
The more you work with variables and maybe also code from other people, you may form your own opinions on what the best naming conventions are for you.
I strongly suggest finding a way that works for you and sticking with it.
As I described above, I personally will try to stick to *lower_snake_case* to name my variables because it is usually very clear, easy to read by humans and computers and would also be usable in any other programming language. <i class="fa-solid fa-worm" style="color: green;"></i>

Another thing that can take some time to get used to is avoiding white spaces in file names and any other names, for that matter.
R has problems finding files with names such as "My file with a really specific name.bib", which can easily be avoided by sticking to snake_case: "My_file_with_a_really_specific_name.bib". 
The same goes for variables: In my first class, we discovered that it is possible in R to set a variable name with a space. 
Just because it's possible does not mean anybody should do it. Ever. 

You can try it out: Enter `"hi there" <- 5` in your console to assign the value 5 to a variable named `hi there`. 
You will see it appear in your working environment, but accessing the variable is virtually impossible.
If you just type `hi there` in the console and hit Enter, R will give you an error à la _"unexpected symbol"_.
But if you type `"hi there"`, it will echo the text back to you.


![Naming Conventions](./img/varname.webp){#id height=400px}
<figcaption style = "font-size: 7pt;">https://www.reddit.com/r/ProgrammerHumor/comments/6stwag/can_you_stick_to_any_naming_convention/</figcaption>



### Exercise: Name Examples

- `great variable`
    -  <i class="fa-solid fa-circle-xmark" style="color: red;"></i> Spaces can technically work but are a hassle to access
- `Areallysuperinsanelyverylongvariablename`
    -  <i class="fa-solid fa-circle-xmark" style="color: red;"></i> Variables are supposed to _reduce_ workload
- `Howaboutthis$`
    - <i class="fa-solid fa-circle-xmark" style="color: red;"></i> Special characters should be avoided
- `age_grouped`
    - <i class="fa-solid fa-check" style="color: green;"></i>
- `GenderRecoded`
    - <i class="fa-solid fa-check" style="color: green;"></i>
- `aMAZING¯vARIABLE¯nAME`
    - <i class="fa-solid fa-circle-xmark" style="color: red;"></i>  Please just no. <i class="fa-solid fa-circle-xmark" style="color: red;"></i> 
    

## Scenario: Creating Data meaningfully

Imagine we are going to measure some test scores at a school that are supposed to reflect the kids' IQ (mean 100, sd 15). <br> <br>
In order to prepare for data analysis, we want to simulate what the data might look like beforehand. <br> <br>

We are going to measure their age and IQ score and we will be assessing class 7a and 7b.

### Exercise: Creating Data meaningfully

Create **two data frames** - one for each class. <br>
They should each contain **n = 20 entries** (for 20 kids) and **2 variables i.e. age and iq score**. <br> <br>
We assume **age is a random number from 12 to 15** and **iq follows normal distribution with mean = 100, sd = 15**. <br>

Afterwards, add a variable to code the **class** to each data frame and add them together **underneath each other**. <br>
Use the functions on the board and look in the R help if you need more input on how to use them. 

<!-- Board functions: data.frame, sample, rnorm, $, rbind, str -->

### Solution 

```{r}
# Create the dataframes
scores7a <- data.frame(age = sample(x = 12:15, size = 20, replace = T),
                       iq = rnorm(n = 20, mean = 100, sd = 15))

scores7b <- data.frame(age = sample(x = 12:15, size = 20, replace = T),
                       iq = rnorm(n = 20, mean = 100, sd = 15))
# Notice anything about the code?

str(scores7a); str(scores7b)
```


```{r}
# Add information about the class
scores7a$class <- "7a"
scores7b$class <- "7b"

# create big dataframe
allscores <- rbind(scores7a, scores7b)

# Check the overall data frame for plausibility
str(allscores)
table(allscores$class)
```


## Working Directories



- A working directory corresponds to the folder on your computer that you are **working in** 
    - If you save a script, it will be saved there
- We usually work with data from other sources or different files
    - e.g. WEXTOR data or bibfiles for bibliography
- Check your working directory: `getwd()`
- Manually set your working directory: `setwd()`
    - Any file you want to use, e.g. containing data will be searched in that folder



### Try it out!

<br> 
Execute the getwd() command in the console. <br>
Which folder is R working in, is it the one you expected?

### Cautionary Tale

<br>



- The file path in `getwd()` will always be _absolute_ $\rightarrow$ full file path from _your_ computer
    - Sharing is difficult
    - Working with that script on your other computer is difficult
    - Nobody else can (easily) reproduce your code
- It is easy to forget which folder you're working on and which one you want to be working on
    - So R won't find files you're looking for and throw errors



## R Projects

<br>


- Solution: Create an R Project for your project!
    - Automatically sets your working directory to the folder you put the project in
    - Makes sharing your project easy
    - Saves you time and frustration, trust me
    


### Let's try that out!

<br>

Under `File` $\rightarrow$ `New project...`


### Homework: Put it to the test

```{r eval = F, include = F}
data <- readr::read_csv("C:/Nextcloud/Lehre/Seminar_PsychResearchR/data.csv") %>% 
  select(observing:gender) %>% 
  mutate(gender = factor(gender, levels = c(1, 2, 3), labels = c("male", "female", "other")))

saveRDS(data, "mindfulness_data.Rds")
```

1. Create a subfolder called "data" in your R project.
2. Download the file "mindfulness_data.Rds" from ILIAS and save it in that folder.
3. Now try to load it into your script and check whether it worked by typing:

```{r}
mindful <- readRDS("./data/mindfulness_data.Rds") # relative filepath
str(mindful)
```

## Make R your own: Appearance

<br>


- There are many different "themes" for R Studio
    - Control not only what the interface looks like but also how code is displayed
    
- Under `Tools` $\rightarrow$ `Global Options` $\rightarrow$ `Appearance`



### Why?

<br>



- Honestly? Because It's fun.  <i class="fa-solid fa-crown" style="color: yellow;"></i> 
- If a program is no fun, you won't like using it
    - And if you don't like using it, you won't get the practice you need!
    


## Not-so-secret keyboard shortcuts to make your life easier

| Function              | Shortcut PC / Mac                  |
|-----------------------|------------------------------------|
| Run current line      | Ctrl + Enter / Cmd + Return        |
| Add \<-               | Alt + - / Option + -               |
| Add %\>%              | Ctrl + Shift + M / Cmd + Shift + M |
| Show help             | F1                                 |
| Options for auto-fill | Tab                                |
| Create New Script     | Ctrl + Shift + N / Cmd + Shift + N |
| Comment out line      | Ctrl + Shift + C / Cmd + Shift + C |
| Save your script      | Ctrl + S / Cmd + S                 |

## Wrap-Up & Further Resources 
 
 <br>
 
> <i class="fa-solid fa-anchor" style="color: teal;"></i>
> <ul style="color: teal;"> 
> <li> Stick to naming conventions for R objects and related files </li>
> <li> Make sure your working directory is correct </li>
> <li> Use R projects to organize your scripts easily </li>
> <li> Make R fun and appealing to use FOR YOU! </li>
> </ul>

 <br>
 
<i class="fa-solid fa-book" style="color: orange;"></i>
<ul style="color: orange;">
<li> [R Projects: A quick overview](https://thedavidchen.github.io/post/rstudio-why-use-projects/) </li>
<li> [Starting your R projects](https://bookdown.org/daniel_dauber_io/r4np_book/starting-your-r-projects.html) </li>
<li> [RStudio Projects and Directories](https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner's-guide/) (rather thorough) </li>
<li> [Some ideas on improving your workflow](https://www.tidyverse.org/blog/2017/12/workflow-vs-script/) (this can seem a bit advanced, but try reading through anyway and see what sticks with you. Building good habits at the beginning of your learning journey will make your life a lot easier down the line!)
</ul>

## Working with Version Control

...can sound scary and daunting to learn.

[Hack your way to a good Git history (Maëlle Salmon)](https://www.r-bloggers.com/2024/06/hack-your-way-to-a-good-git-history/)
